import { useState, useEffect } from 'react'\nimport * as Icons from 'lucide-react'\n\n\n// Trial Balance Component\nexport function TrialBalance() {\n  const [trialBalance, setTrialBalance] = useState([])\n  const [loading, setLoading] = useState(true)\n  const [asOfDate, setAsOfDate] = useState(new Date().toISOString().split('T')[0])\n  const [showZeroBalances, setShowZeroBalances] = useState(false)\n\n  useEffect(() => {\n    loadTrialBalance()\n  }, [asOfDate, showZeroBalances])\n\n  const loadTrialBalance = async () => {\n    setLoading(true)\n    try {\n      // Mock data - replace with API call\n      const mockData = [\n        { account_code: '110000', account_name: 'Cash and Bank', debit: 125000, credit: 0, account_type: 'ASSET' },\n        { account_code: '140000', account_name: 'Raw Materials Inventory', debit: 85000, credit: 0, account_type: 'ASSET' },\n        { account_code: '200000', account_name: 'Accounts Payable', debit: 0, credit: 45000, account_type: 'LIABILITY' },\n        { account_code: '400100', account_name: 'Raw Materials Consumed', debit: 45000, credit: 0, account_type: 'EXPENSE' },\n        { account_code: '600100', account_name: 'Direct Labor', debit: 95000, credit: 0, account_type: 'EXPENSE' },\n        { account_code: '800100', account_name: 'Construction Revenue', debit: 0, credit: 350000, account_type: 'REVENUE' }\n      ]\n      \n      const filtered = showZeroBalances ? mockData : mockData.filter(item => item.debit > 0 || item.credit > 0)\n      setTrialBalance(filtered)\n    } catch (error) {\n      console.error('Error loading trial balance:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const totalDebits = trialBalance.reduce((sum, item) => sum + item.debit, 0)\n  const totalCredits = trialBalance.reduce((sum, item) => sum + item.credit, 0)\n  const isBalanced = totalDebits === totalCredits\n\n  const getTypeColor = (type) => {\n    switch (type) {\n      case 'ASSET': return 'text-blue-600'\n      case 'LIABILITY': return 'text-red-600'\n      case 'EXPENSE': return 'text-orange-600'\n      case 'REVENUE': return 'text-green-600'\n      default: return 'text-gray-600'\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"bg-white shadow-sm border-b px-4 py-3 sticky top-0 z-10\">\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-2 sm:mb-0\">Trial Balance</h2>\n          <div className=\"flex items-center space-x-2\">\n            <span className={`px-3 py-1 rounded-full text-sm font-medium ${\n              isBalanced ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\n            }`}>\n              {isBalanced ? 'Balanced' : 'Out of Balance'}\n            </span>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"p-4\">\n        {/* Controls */}\n        <div className=\"bg-white rounded-lg shadow-sm border p-4 mb-6\">\n          <div className=\"flex flex-col sm:flex-row gap-4\">\n            <div className=\"flex-1\">\n              <label className=\"block text-sm font-medium mb-2\">As of Date</label>\n              <input\n                type=\"date\"\n                className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500\"\n                value={asOfDate}\n                onChange={(e) => setAsOfDate(e.target.value)}\n              />\n            </div>\n            <div className=\"flex items-end\">\n              <label className=\"flex items-center\">\n                <input\n                  type=\"checkbox\"\n                  className=\"mr-2\"\n                  checked={showZeroBalances}\n                  onChange={(e) => setShowZeroBalances(e.target.checked)}\n                />\n                <span className=\"text-sm\">Show zero balances</span>\n              </label>\n            </div>\n            <div className=\"flex items-end\">\n              <button \n                onClick={loadTrialBalance}\n                className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center\"\n              >\n                <Icons.RefreshCw className=\"w-4 h-4 mr-2\" />\n                Refresh\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Summary Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\n          <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n            <div className=\"flex items-center\">\n              <Icons.TrendingUp className=\"w-8 h-8 text-blue-600 mr-3\" />\n              <div>\n                <p className=\"text-sm text-gray-600\">Total Debits</p>\n                <p className=\"text-2xl font-bold text-blue-900\">${totalDebits.toLocaleString()}</p>\n              </div>\n            </div>\n          </div>\n          <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n            <div className=\"flex items-center\">\n              <Icons.TrendingDown className=\"w-8 h-8 text-red-600 mr-3\" />\n              <div>\n                <p className=\"text-sm text-gray-600\">Total Credits</p>\n                <p className=\"text-2xl font-bold text-red-900\">${totalCredits.toLocaleString()}</p>\n              </div>\n            </div>\n          </div>\n          <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n            <div className=\"flex items-center\">\n              <Icons.Scale className=\"w-8 h-8 text-purple-600 mr-3\" />\n              <div>\n                <p className=\"text-sm text-gray-600\">Difference</p>\n                <p className={`text-2xl font-bold ${\n                  isBalanced ? 'text-green-900' : 'text-red-900'\n                }`}>\n                  ${Math.abs(totalDebits - totalCredits).toLocaleString()}\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Trial Balance Table */}\n        <div className=\"bg-white rounded-lg shadow-sm border overflow-hidden\">\n          {loading ? (\n            <div className=\"p-8 text-center\">\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\n              <p className=\"mt-2 text-gray-500\">Loading trial balance...</p>\n            </div>\n          ) : (\n            <>\n              {/* Desktop Table */}\n              <div className=\"hidden md:block overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead className=\"bg-gray-50\">\n                    <tr>\n                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Account</th>\n                      <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Account Name</th>\n                      <th className=\"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Debit</th>\n                      <th className=\"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Credit</th>\n                      <th className=\"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Balance</th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-gray-200\">\n                    {trialBalance.map(item => {\n                      const balance = item.debit - item.credit\n                      return (\n                        <tr key={item.account_code} className=\"hover:bg-gray-50\">\n                          <td className=\"px-4 py-3 font-mono text-sm font-medium\">{item.account_code}</td>\n                          <td className=\"px-4 py-3 text-sm\">\n                            <span className={getTypeColor(item.account_type)}>{item.account_name}</span>\n                          </td>\n                          <td className=\"px-4 py-3 text-sm text-right font-medium\">\n                            {item.debit > 0 ? `$${item.debit.toLocaleString()}` : '-'}\n                          </td>\n                          <td className=\"px-4 py-3 text-sm text-right font-medium\">\n                            {item.credit > 0 ? `$${item.credit.toLocaleString()}` : '-'}\n                          </td>\n                          <td className={`px-4 py-3 text-sm text-right font-medium ${\n                            balance > 0 ? 'text-blue-600' : balance < 0 ? 'text-red-600' : 'text-gray-600'\n                          }`}>\n                            ${Math.abs(balance).toLocaleString()} {balance < 0 ? 'Cr' : balance > 0 ? 'Dr' : ''}\n                          </td>\n                        </tr>\n                      )\n                    })}\n                    {/* Totals Row */}\n                    <tr className=\"bg-gray-50 font-medium\">\n                      <td className=\"px-4 py-3 text-sm font-bold\" colSpan=\"2\">TOTALS</td>\n                      <td className=\"px-4 py-3 text-sm text-right font-bold\">${totalDebits.toLocaleString()}</td>\n                      <td className=\"px-4 py-3 text-sm text-right font-bold\">${totalCredits.toLocaleString()}</td>\n                      <td className={`px-4 py-3 text-sm text-right font-bold ${\n                        isBalanced ? 'text-green-600' : 'text-red-600'\n                      }`}>\n                        {isBalanced ? 'BALANCED' : `OUT BY $${Math.abs(totalDebits - totalCredits).toLocaleString()}`}\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n\n              {/* Mobile Cards */}\n              <div className=\"md:hidden\">\n                {trialBalance.map(item => {\n                  const balance = item.debit - item.credit\n                  return (\n                    <div key={item.account_code} className=\"p-4 border-b border-gray-200 last:border-b-0\">\n                      <div className=\"flex justify-between items-start mb-2\">\n                        <div>\n                          <p className=\"font-mono text-sm font-medium\">{item.account_code}</p>\n                          <p className={`text-sm ${getTypeColor(item.account_type)}`}>{item.account_name}</p>\n                        </div>\n                      </div>\n                      <div className=\"grid grid-cols-3 gap-4 text-sm\">\n                        <div>\n                          <p className=\"text-gray-500\">Debit</p>\n                          <p className=\"font-medium\">{item.debit > 0 ? `$${item.debit.toLocaleString()}` : '-'}</p>\n                        </div>\n                        <div>\n                          <p className=\"text-gray-500\">Credit</p>\n                          <p className=\"font-medium\">{item.credit > 0 ? `$${item.credit.toLocaleString()}` : '-'}</p>\n                        </div>\n                        <div>\n                          <p className=\"text-gray-500\">Balance</p>\n                          <p className={`font-medium ${\n                            balance > 0 ? 'text-blue-600' : balance < 0 ? 'text-red-600' : 'text-gray-600'\n                          }`}>\n                            ${Math.abs(balance).toLocaleString()} {balance < 0 ? 'Cr' : balance > 0 ? 'Dr' : ''}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  )\n                })}\n                \n                {/* Mobile Totals */}\n                <div className=\"p-4 bg-gray-50 border-t-2 border-gray-300\">\n                  <div className=\"grid grid-cols-3 gap-4 text-sm font-bold\">\n                    <div>\n                      <p className=\"text-gray-700\">Total Debits</p>\n                      <p>${totalDebits.toLocaleString()}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-gray-700\">Total Credits</p>\n                      <p>${totalCredits.toLocaleString()}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-gray-700\">Status</p>\n                      <p className={isBalanced ? 'text-green-600' : 'text-red-600'}>\n                        {isBalanced ? 'BALANCED' : 'OUT OF BALANCE'}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\n// Financial Statements Component\nexport function FinancialStatements() {\n  const [activeStatement, setActiveStatement] = useState('balance-sheet')\n  const [period, setPeriod] = useState('current')\n  const [loading, setLoading] = useState(false)\n\n  const statements = [\n    { key: 'balance-sheet', label: 'Balance Sheet', icon: Icons.Scale },\n    { key: 'income-statement', label: 'P&L Statement', icon: Icons.TrendingUp },\n    { key: 'cash-flow', label: 'Cash Flow', icon: Icons.DollarSign }\n  ]\n\n  const balanceSheetData = {\n    assets: {\n      current: [\n        { name: 'Cash and Bank', amount: 125000 },\n        { name: 'Accounts Receivable', amount: 85000 },\n        { name: 'Inventory', amount: 65000 }\n      ],\n      fixed: [\n        { name: 'Equipment', amount: 250000 },\n        { name: 'Buildings', amount: 500000 },\n        { name: 'Less: Depreciation', amount: -75000 }\n      ]\n    },\n    liabilities: {\n      current: [\n        { name: 'Accounts Payable', amount: 45000 },\n        { name: 'Accrued Expenses', amount: 25000 }\n      ],\n      longTerm: [\n        { name: 'Long-term Debt', amount: 300000 }\n      ]\n    },\n    equity: [\n      { name: 'Share Capital', amount: 400000 },\n      { name: 'Retained Earnings', amount: 180000 }\n    ]\n  }\n\n  const totalCurrentAssets = balanceSheetData.assets.current.reduce((sum, item) => sum + item.amount, 0)\n  const totalFixedAssets = balanceSheetData.assets.fixed.reduce((sum, item) => sum + item.amount, 0)\n  const totalAssets = totalCurrentAssets + totalFixedAssets\n  \n  const totalCurrentLiabilities = balanceSheetData.liabilities.current.reduce((sum, item) => sum + item.amount, 0)\n  const totalLongTermLiabilities = balanceSheetData.liabilities.longTerm.reduce((sum, item) => sum + item.amount, 0)\n  const totalLiabilities = totalCurrentLiabilities + totalLongTermLiabilities\n  \n  const totalEquity = balanceSheetData.equity.reduce((sum, item) => sum + item.amount, 0)\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"bg-white shadow-sm border-b px-4 py-3 sticky top-0 z-10\">\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-2 sm:mb-0\">Financial Statements</h2>\n          <div className=\"flex items-center space-x-2\">\n            <select \n              className=\"border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500\"\n              value={period}\n              onChange={(e) => setPeriod(e.target.value)}\n            >\n              <option value=\"current\">Current Period</option>\n              <option value=\"ytd\">Year to Date</option>\n              <option value=\"previous\">Previous Year</option>\n            </select>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"p-4\">\n        {/* Statement Tabs */}\n        <div className=\"bg-white rounded-lg shadow-sm border mb-6\">\n          <div className=\"flex border-b overflow-x-auto\">\n            {statements.map(statement => (\n              <button\n                key={statement.key}\n                onClick={() => setActiveStatement(statement.key)}\n                className={`flex items-center px-4 py-3 text-sm font-medium whitespace-nowrap ${\n                  activeStatement === statement.key\n                    ? 'border-b-2 border-blue-500 text-blue-600'\n                    : 'text-gray-500 hover:text-gray-700'\n                }`}\n              >\n                <statement.icon className=\"w-4 h-4 mr-2\" />\n                {statement.label}\n              </button>\n            ))}\n          </div>\n\n          <div className=\"p-6\">\n            {activeStatement === 'balance-sheet' && (\n              <div className=\"space-y-8\">\n                {/* Assets */}\n                <div>\n                  <h3 className=\"text-lg font-semibold mb-4 text-blue-900\">ASSETS</h3>\n                  \n                  <div className=\"mb-6\">\n                    <h4 className=\"font-medium mb-3 text-gray-700\">Current Assets</h4>\n                    <div className=\"space-y-2\">\n                      {balanceSheetData.assets.current.map((item, index) => (\n                        <div key={index} className=\"flex justify-between items-center py-1\">\n                          <span className=\"text-sm\">{item.name}</span>\n                          <span className=\"text-sm font-medium\">${item.amount.toLocaleString()}</span>\n                        </div>\n                      ))}\n                      <div className=\"flex justify-between items-center py-2 border-t font-medium\">\n                        <span>Total Current Assets</span>\n                        <span>${totalCurrentAssets.toLocaleString()}</span>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"mb-6\">\n                    <h4 className=\"font-medium mb-3 text-gray-700\">Fixed Assets</h4>\n                    <div className=\"space-y-2\">\n                      {balanceSheetData.assets.fixed.map((item, index) => (\n                        <div key={index} className=\"flex justify-between items-center py-1\">\n                          <span className=\"text-sm\">{item.name}</span>\n                          <span className={`text-sm font-medium ${\n                            item.amount < 0 ? 'text-red-600' : ''\n                          }`}>\n                            ${item.amount.toLocaleString()}\n                          </span>\n                        </div>\n                      ))}\n                      <div className=\"flex justify-between items-center py-2 border-t font-medium\">\n                        <span>Total Fixed Assets</span>\n                        <span>${totalFixedAssets.toLocaleString()}</span>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"flex justify-between items-center py-3 border-t-2 border-blue-200 font-bold text-lg text-blue-900\">\n                    <span>TOTAL ASSETS</span>\n                    <span>${totalAssets.toLocaleString()}</span>\n                  </div>\n                </div>\n\n                {/* Liabilities & Equity */}\n                <div>\n                  <h3 className=\"text-lg font-semibold mb-4 text-red-900\">LIABILITIES & EQUITY</h3>\n                  \n                  <div className=\"mb-6\">\n                    <h4 className=\"font-medium mb-3 text-gray-700\">Current Liabilities</h4>\n                    <div className=\"space-y-2\">\n                      {balanceSheetData.liabilities.current.map((item, index) => (\n                        <div key={index} className=\"flex justify-between items-center py-1\">\n                          <span className=\"text-sm\">{item.name}</span>\n                          <span className=\"text-sm font-medium\">${item.amount.toLocaleString()}</span>\n                        </div>\n                      ))}\n                      <div className=\"flex justify-between items-center py-2 border-t font-medium\">\n                        <span>Total Current Liabilities</span>\n                        <span>${totalCurrentLiabilities.toLocaleString()}</span>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"mb-6\">\n                    <h4 className=\"font-medium mb-3 text-gray-700\">Long-term Liabilities</h4>\n                    <div className=\"space-y-2\">\n                      {balanceSheetData.liabilities.longTerm.map((item, index) => (\n                        <div key={index} className=\"flex justify-between items-center py-1\">\n                          <span className=\"text-sm\">{item.name}</span>\n                          <span className=\"text-sm font-medium\">${item.amount.toLocaleString()}</span>\n                        </div>\n                      ))}\n                      <div className=\"flex justify-between items-center py-2 border-t font-medium\">\n                        <span>Total Long-term Liabilities</span>\n                        <span>${totalLongTermLiabilities.toLocaleString()}</span>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"mb-6\">\n                    <h4 className=\"font-medium mb-3 text-gray-700\">Equity</h4>\n                    <div className=\"space-y-2\">\n                      {balanceSheetData.equity.map((item, index) => (\n                        <div key={index} className=\"flex justify-between items-center py-1\">\n                          <span className=\"text-sm\">{item.name}</span>\n                          <span className=\"text-sm font-medium\">${item.amount.toLocaleString()}</span>\n                        </div>\n                      ))}\n                      <div className=\"flex justify-between items-center py-2 border-t font-medium\">\n                        <span>Total Equity</span>\n                        <span>${totalEquity.toLocaleString()}</span>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"flex justify-between items-center py-3 border-t-2 border-red-200 font-bold text-lg text-red-900\">\n                    <span>TOTAL LIABILITIES & EQUITY</span>\n                    <span>${(totalLiabilities + totalEquity).toLocaleString()}</span>\n                  </div>\n                </div>\n\n                {/* Balance Check */}\n                <div className={`p-4 rounded-lg ${\n                  totalAssets === (totalLiabilities + totalEquity)\n                    ? 'bg-green-50 border border-green-200'\n                    : 'bg-red-50 border border-red-200'\n                }`}>\n                  <div className=\"flex items-center\">\n                    {totalAssets === (totalLiabilities + totalEquity) ? (\n                      <Icons.CheckCircle className=\"w-5 h-5 text-green-600 mr-2\" />\n                    ) : (\n                      <Icons.AlertCircle className=\"w-5 h-5 text-red-600 mr-2\" />\n                    )}\n                    <span className={`font-medium ${\n                      totalAssets === (totalLiabilities + totalEquity)\n                        ? 'text-green-800'\n                        : 'text-red-800'\n                    }`}>\n                      {totalAssets === (totalLiabilities + totalEquity)\n                        ? 'Balance Sheet is balanced'\n                        : `Balance Sheet is out of balance by $${Math.abs(totalAssets - (totalLiabilities + totalEquity)).toLocaleString()}`\n                      }\n                    </span>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {activeStatement === 'income-statement' && (\n              <div className=\"text-center py-12\">\n                <Icons.TrendingUp className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n                <p className=\"text-gray-500\">Income Statement coming soon...</p>\n              </div>\n            )}\n\n            {activeStatement === 'cash-flow' && (\n              <div className=\"text-center py-12\">\n                <Icons.DollarSign className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n                <p className=\"text-gray-500\">Cash Flow Statement coming soon...</p>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}